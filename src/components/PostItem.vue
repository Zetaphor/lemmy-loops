<template>
  <div ref="containerEl" class="relative overflow-y-hidden scroll-container">
    <!-- Post options-->
    <div ref="optionsEl" :class="[{ 'transition-all duration-200 ease-linear': !isSwiping }, 'w-full h-full absolute']"
      :style="`left: ${optionsElOffset}%`">
      <div class="flex h-full justify-center items-center">
        <div class="flex">
          <div class="flex-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="10 0 70 90"
              class="stroke-gray-500 fill-gray-500 w-16 h-16 p-3">
              <path
                d="M50.02,85.502c-3.441,0-6.825-1.397-9.251-3.801s-3.808-5.757-3.808-9.139s1.382-6.736,3.808-9.14   s5.81-3.773,9.251-3.773c3.413,0,6.768,1.37,9.194,3.773s3.836,5.758,3.836,9.14s-1.41,6.735-3.836,9.139   S53.433,85.502,50.02,85.502L50.02,85.502z M50.02,83.938c2.989,0,5.951-1.258,8.066-3.354c2.115-2.067,3.356-5.059,3.356-8.021   c0-2.963-1.241-5.926-3.356-8.021c-2.115-2.097-5.077-3.326-8.066-3.326c-2.99,0-6.007,1.229-8.123,3.326   c-2.115,2.096-3.356,5.059-3.356,8.021c0,2.962,1.241,5.953,3.356,8.021C44.013,82.68,47.03,83.938,50.02,83.938L50.02,83.938z    M28.331,62.165c-1.269,0-2.538-0.475-3.525-1.453l-7.925-7.993c-1.946-1.958-1.721-4.919-0.084-6.988   c0.028-0.028,0.056-0.056,0.084-0.056l21.604-21.716l7.954-7.993c1.918-1.957,5.104-1.957,7.05,0l7.926,7.993l21.632,21.716   c1.946,1.957,1.946,5.086,0,7.044l-7.953,7.993c-0.931,0.95-2.2,1.397-3.44,1.426c-0.028,0-0.057,0.027-0.085,0.027   c-1.27,0-2.566-0.475-3.525-1.453L49.963,42.517L31.885,60.712C30.897,61.69,29.628,62.165,28.331,62.165L28.331,62.165z    M28.331,60.6c0.875,0,1.721-0.335,2.397-1.006l18.671-18.726c0.282-0.307,0.846-0.307,1.128,0l18.67,18.726   c0.648,0.671,1.522,0.979,2.369,0.979c0.874,0,1.721-0.308,2.397-0.979l7.925-7.993c1.354-1.342,1.354-3.466,0-4.835L60.286,25.049   h0.027l-7.981-7.965c-1.325-1.341-3.412-1.341-4.766,0l-7.954,7.965l-21.548,21.66c-1.241,1.593-1.41,3.55-0.057,4.892l7.954,7.993   C26.611,60.265,27.485,60.6,28.331,60.6L28.331,60.6z" />
            </svg>
            <p class="text-center w-full">Up</p>
          </div>
          <div class="flex-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="10 0 70 90"
              class="stroke-gray-500 fill-gray-500 w-16 h-16 p-3">
              <path
                d="M50.02,14.509c-3.441,0-6.825,1.397-9.251,3.801c-2.426,2.375-3.808,5.729-3.808,9.139   c0,3.382,1.382,6.735,3.808,9.139c2.426,2.403,5.81,3.773,9.251,3.773c3.413,0,6.768-1.37,9.194-3.773   c2.426-2.404,3.836-5.757,3.836-9.139c0-3.41-1.41-6.764-3.836-9.139C56.788,15.906,53.433,14.509,50.02,14.509L50.02,14.509z    M50.02,16.074c2.989,0,5.951,1.229,8.066,3.326s3.356,5.086,3.356,8.049c0,2.962-1.241,5.897-3.356,7.993   s-5.077,3.326-8.066,3.326c-2.99,0-6.007-1.229-8.123-3.326c-2.115-2.096-3.356-5.031-3.356-7.993c0-2.963,1.241-5.953,3.356-8.049   C44.013,17.304,47.03,16.074,50.02,16.074L50.02,16.074z M28.331,37.846c-1.269,0-2.538,0.475-3.525,1.453l-7.925,7.993   c-1.946,1.957-1.721,4.919-0.084,6.988c0.028,0.027,0.056,0.027,0.084,0.056l21.604,21.716l7.954,7.993   c1.918,1.929,5.104,1.929,7.05,0l7.926-7.993l21.632-21.716c1.946-1.957,1.946-5.115,0-7.043l-7.953-7.993   c-0.931-0.95-2.2-1.397-3.44-1.425c-0.028,0-0.057-0.028-0.085-0.028c-1.27,0-2.566,0.475-3.525,1.453L49.963,57.494L31.885,39.299   C30.897,38.321,29.628,37.846,28.331,37.846L28.331,37.846z M28.331,39.383c0.875,0.028,1.721,0.363,2.397,1.034l18.671,18.725   c0.282,0.308,0.846,0.308,1.128,0l18.67-18.725c0.648-0.671,1.522-1.006,2.369-1.006c0.874,0,1.721,0.335,2.397,1.006l7.925,7.965   c1.354,1.369,1.354,3.493,0,4.835L60.286,74.934l0.027,0.028l-7.981,7.965c-1.325,1.342-3.412,1.342-4.766,0l-7.954-7.993   L18.065,53.302c-1.241-1.593-1.41-3.578-0.057-4.919l7.954-7.965C26.611,39.747,27.485,39.383,28.331,39.383L28.331,39.383z" />
            </svg>
            <p class="text-center w-full">Down</p>
          </div>
          <div class="flex-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="5 -15 92 115"
              class="stroke-gray-500 fill-gray-500 w-16 h-16 p-3">
              <path
                d="M77.8 11.6A10.4 10.4 0 1 1 67.4 22a10.4 10.4 0 0 1 10.4-10.4ZM17.2 57.9a10.4 10.4 0 1 1 10.4-10.4 10.4 10.4 0 0 1-10.4 10.4Zm60.6 4.6A10.4 10.4 0 1 1 67.4 73a10.4 10.4 0 0 1 10.4-10.5Zm0-25.8A14.7 14.7 0 1 0 63.2 22a14.4 14.4 0 0 0 .1 2L29.5 39.7a14.7 14.7 0 1 0 0 15.8L63.3 71a14.4 14.4 0 0 0-.1 2 14.7 14.7 0 1 0 1.3-6L31.2 51.5a14.6 14.6 0 0 0 0-8.2l33.3-15.2a14.7 14.7 0 0 0 13.3 8.5Z"
                class="cls-1" />
            </svg>
            <p class="text-center w-full">Share</p>
          </div>
          <div class="flex-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="10 -5 75 100"
              class="stroke-gray-500 fill-gray-500 w-16 h-16 p-3">
              <path
                d="m25.5 61.5-2.2 21.1a5.2 5.2 0 0 0 5.2 5.8c.7 0 1.4-.2 2.1-.5L50 79.2l19.4 8.6c1.7.8 3.7.6 5.2-.5a5.2 5.2 0 0 0 2.1-4.8l-2.2-21.1 14.2-15.8a5 5 0 0 0 1.1-5.1c-.6-1.8-2-3.1-3.9-3.5l-20.7-4.4-10.7-18.3a5.1 5.1 0 0 0-4.5-2.6c-1.9 0-3.6 1-4.5 2.6L34.9 32.7l-20.7 4.4a5.3 5.3 0 0 0-3.9 3.5 5 5 0 0 0 1.1 5.1l14.1 15.8zM13.6 41.7c.1-.3.4-1 1.3-1.2l21.5-4.6c.5-.1.9-.4 1.1-.8l11-19c.5-.8 1.2-.9 1.5-.9.3 0 1.1.1 1.5.9L62.4 35l.3.5.3.3.6.3L85 40.7a1.7 1.7 0 0 1 .9 2.9L71.4 59.7c-.3.4-.5.9-.4 1.3l2.3 21.8c.1.9-.5 1.4-.7 1.6-.2.2-.9.5-1.7.2l-20.1-8.9c-.5-.2-1-.2-1.4 0l-20.1 8.9c-.8.4-1.5 0-1.7-.2-.2-.2-.8-.7-.7-1.6L29.1 61c.1-.5-.1-1-.4-1.3L13.9 43.4c-.6-.7-.4-1.4-.3-1.7z" />
            </svg>
            <p class="text-center w-full">Save</p>
          </div>
          <div class="flex-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -6 80 100"
              class="stroke-gray-500 fill-gray-500 w-16 h-16 p-3">
              <path
                d="M50 7a10 10 0 0 0 0 20 10 10 0 0 0 0-20zm0 2a8 8 0 1 1 0 16 8 8 0 1 1 0-16zm0 31a10 10 0 0 0 0 20 10 10 0 0 0 0-20zm0 2a8 8 0 1 1 0 16 8 8 0 1 1 0-16zm0 31a10 10 0 0 0 0 20 10 10 0 0 0 0-20zm0 2a8 8 0 1 1 0 16 8 8 0 1 1 0-16z" />
            </svg>
            <p class="text-center w-full">More</p>
          </div>
        </div>
      </div>
    </div>
    <!-- Post content -->
    <div ref="contentEl" :class="[{ 'transition-all duration-200 ease-linear': !isSwiping }, 'w-full relative']"
      :style="`right: ${contentElOffset}%`">
      <div class="card-bordered card-compact my-2 bg-gray-800 shadow-sm cursor-pointer flex w-full">
        <div
          :class="[props.post.content.hasImage || props.post.content.hasUrl || props.post.content.hasVideo ? 'w-3/4' : 'w-full']">
          <div class="p-2">
            <p class="text-xl text-white">{{ props.post.content.name }}</p>

            <div v-if="props.post.content.hasUrl && !props.post.content.hasImage"
              class="text-xs inline-flex items-center text-gray-500">
              <svg version="1.1" viewBox="300 200 750 750" xmlns="http://www.w3.org/2000/svg"
                class="h-4 w-4 fill-current text-gray-500">
                <path
                  d="m762.18 781.91h-33.719c-2.2578 0-4.7539 0-7.0078-0.44531-14.484-0.25391-28.738-2.7344-42.098-6.8047-34.824-10.633-65.16-32.125-86.426-60.625-5.6641-7.2461-10.402-14.711-14.473-22.621-3.8398-7.2461-7.2461-14.734-9.7305-22.633-6.5508-17.664-9.9609-36.66-9.9609-56.566s3.4062-38.93 9.9609-56.555h61.754c4.2969 0 8.3633 0.43359 12.445 1.3555-10.176 15.828-16.285 34.824-16.285 55.199s6.1211 39.371 16.285 55.188c4.5234 6.8047 9.7422 13.141 15.828 18.781 6.1328 5.8789 12.898 10.871 20.594 15.168 14.473 7.9336 31.223 12.684 49.105 12.684h158.37c56.125 0 101.81-45.695 101.81-101.81 0-56.113-45.695-101.8-101.81-101.8h-66.973c-14.461-26.699-34.152-49.777-57.684-67.883h124.66c93.66 0 169.69 75.996 169.69 169.68 0 93.695-76.031 169.69-169.69 169.69l-124.64 0.007813z" />
                <path
                  d="m700.18 538.25c-6.3359-5.8906-13.117-11.09-20.809-15.145-14.461-8.1836-31.223-12.684-48.863-12.684h-158.39c-56.09 0-101.8 45.684-101.8 101.8 0 56.113 45.719 101.81 101.8 101.81h67.199c14.27 26.473 33.938 49.535 57.469 67.871h-124.67c-93.66 0-169.67-75.996-169.67-169.69 0-93.684 76.008-169.68 169.67-169.68h158.39c2.4961 0 4.7539 0 7.0312 0.44531 14.461 0.22656 28.488 2.7344 41.832 6.8047 35.074 10.633 65.375 32.113 86.438 60.625 5.8672 7.2344 10.633 14.711 14.699 22.621 3.8281 7.2461 7.2461 14.711 9.7422 22.633 6.5625 17.629 9.9375 36.648 9.9375 56.555s-3.3711 38.902-9.9375 56.566h-61.766c-4.2734 0-8.6055-0.44531-12.445-1.3789 10.402-15.805 16.285-34.801 16.285-55.188 0-20.363-5.8789-39.359-16.285-55.199-4.543-6.7852-9.7383-13.109-15.859-18.762z" />
              </svg>
              <p class="ml-1 mb-0 flex-grow-0 text-gray-400">
                {{ post.content.url_domain }}
              </p>
            </div>

            <p v-if="props.post.content.body.length"
              class="text-md text-gray-200 bg-gray-600 rounded-md my-1 px-2 w-15 max-h-10 overflow-hidden overflow-ellipsis truncate">
              {{ props.post.content.body }}
            </p>
            <div>
              <div class="text-sm inline-flex items-center">
                <img v-if="props.post.community.icon.length" :src="props.post.community.icon"
                  class="h-4 w-4 rounded-sm mt-0.5 mr-1">
                <p class="text-sm flex-grow-0 text-gray-300">{{ props.post.community.name }}</p>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                  stroke-width="5" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-gray-400">
                  <path d="M9 18l6-6-6-6" />
                </svg>
                <p class="text-sm flex-grow-0 text-gray-400">{{ props.post.community.actor_domain }}</p>
              </div>
            </div>

            <div>
              <div class="inline-flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="15 -15 95 120"
                  class="h-4 w-4 fill-gray-500 stroke-gray-500">
                  <path
                    d="M93.84,70.592l0.039-0.007l-0.17-0.838c-0.063-0.312-0.73-3.149-0.73-3.149l-0.224-0.806l-0.044,0.01  c-3.385-11.005-10.324-14.448-19.842-19.17l-1.896-0.97c2.813-4.172,4.293-9.015,4.293-14.064c0-13.924-11.326-25.251-25.25-25.251  c-13.924,0-25.252,11.327-25.252,25.251c0,5.054,1.482,9.898,4.299,14.072l-1.894,0.957C17.27,51.54,10.061,55.115,6.862,67.409  l-0.065-0.013l-0.477,2.35c-1.043,5.143-1.305,13.467-1.315,13.816c-0.081,2.682,0.896,5.211,2.753,7.125  c1.856,1.912,4.355,2.965,7.036,2.965h70.44c2.684,0,5.181-1.053,7.033-2.969c1.851-1.914,2.818-4.445,2.728-7.127  C94.984,83.236,94.73,75.995,93.84,70.592z M50.015,11.156c11.271,0,20.44,9.17,20.44,20.441s-9.17,20.441-20.44,20.441  c-11.271,0-20.441-9.17-20.441-20.441S38.743,11.156,50.015,11.156z M88.809,87.342c-0.937,0.969-2.205,1.503-3.572,1.503H14.794  c-1.371,0-2.644-0.534-3.585-1.505c-0.942-0.973-1.438-2.262-1.396-3.636c0.012-0.34,0.284-8.381,1.222-13  c2.415-11.897,7.714-14.527,18.281-19.771l2.876-1.472c4.773,4.771,11.078,7.388,17.823,7.388c6.741,0,13.043-2.619,17.815-7.385  l2.891,1.473c9.973,4.947,15.465,7.674,18.008,18.557l0.051,0.223c1.093,4.977,1.404,13.913,1.408,14.006  C90.234,85.088,89.745,86.374,88.809,87.342z" />
                </svg>
                <p class="text-xs flex-grow-0 ml-0.5">
                  <span class="text-gray-300">{{ props.post.creator.name }}</span>
                  <span class="text-gray-400">@{{ props.post.creator.actor_domain }}</span>
                </p>
              </div>
            </div>

            <div>
              <div class="text-xs inline-flex items-center text-gray-500">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="5 0 90 90"
                  class="fill-current text-gray-500 w-4 h-4 pr-1">
                  <path
                    d="M50,88.8C50,88.8,50,88.8,50,88.8c-4,0-7.5-2-9.5-5.4l-5-8.5h-6.1c-14.8,0-26.8-12-26.8-26.8v-10    c0-14.8,12-26.8,26.8-26.8h41.3c14.8,0,26.8,12,26.8,26.8v10c0,14.8-12,26.8-26.8,26.8h-6.1l-5,8.5C57.5,86.7,54,88.8,50,88.8z     M29.3,20.9c-9.5,0-17.2,7.7-17.2,17.2v10c0,9.5,7.7,17.2,17.2,17.2h8.9c1.7,0,3.3,0.9,4.1,2.4l6.4,10.8c0.4,0.6,0.9,0.7,1.2,0.7    s0.9-0.1,1.2-0.7l6.4-10.8c0.9-1.5,2.4-2.4,4.1-2.4h8.9c9.5,0,17.2-7.7,17.2-17.2v-10c0-9.5-7.7-17.2-17.2-17.2H29.3z" />
                </svg>
                <p class="flex-grow-0 text-md">{{ props.post.counts.comments }}</p>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10" class="h-4 w-4">
                  <circle cx="5" cy="5" r="2" class="fill-current text-gray-600" />
                </svg>
                <p class="flex-grow-0 mr-4 text-md">{{ props.post.content.published }}</p>

                <p class="flex-grow-0 text-md">{{ props.post.counts.score }}pts</p>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="-1 0 10 10" class="h-4 w-4">
                  <circle cx="5" cy="5" r="2" class="fill-current text-gray-600" />
                </svg>


                <svg xmlns="http://www.w3.org/2000/svg" viewBox="10 0 70 90"
                  class="stroke-orange-300 fill-orange-300 w-4 h-4">
                  <path
                    d="M50.02,85.502c-3.441,0-6.825-1.397-9.251-3.801s-3.808-5.757-3.808-9.139s1.382-6.736,3.808-9.14   s5.81-3.773,9.251-3.773c3.413,0,6.768,1.37,9.194,3.773s3.836,5.758,3.836,9.14s-1.41,6.735-3.836,9.139   S53.433,85.502,50.02,85.502L50.02,85.502z M50.02,83.938c2.989,0,5.951-1.258,8.066-3.354c2.115-2.067,3.356-5.059,3.356-8.021   c0-2.963-1.241-5.926-3.356-8.021c-2.115-2.097-5.077-3.326-8.066-3.326c-2.99,0-6.007,1.229-8.123,3.326   c-2.115,2.096-3.356,5.059-3.356,8.021c0,2.962,1.241,5.953,3.356,8.021C44.013,82.68,47.03,83.938,50.02,83.938L50.02,83.938z    M28.331,62.165c-1.269,0-2.538-0.475-3.525-1.453l-7.925-7.993c-1.946-1.958-1.721-4.919-0.084-6.988   c0.028-0.028,0.056-0.056,0.084-0.056l21.604-21.716l7.954-7.993c1.918-1.957,5.104-1.957,7.05,0l7.926,7.993l21.632,21.716   c1.946,1.957,1.946,5.086,0,7.044l-7.953,7.993c-0.931,0.95-2.2,1.397-3.44,1.426c-0.028,0-0.057,0.027-0.085,0.027   c-1.27,0-2.566-0.475-3.525-1.453L49.963,42.517L31.885,60.712C30.897,61.69,29.628,62.165,28.331,62.165L28.331,62.165z    M28.331,60.6c0.875,0,1.721-0.335,2.397-1.006l18.671-18.726c0.282-0.307,0.846-0.307,1.128,0l18.67,18.726   c0.648,0.671,1.522,0.979,2.369,0.979c0.874,0,1.721-0.308,2.397-0.979l7.925-7.993c1.354-1.342,1.354-3.466,0-4.835L60.286,25.049   h0.027l-7.981-7.965c-1.325-1.341-3.412-1.341-4.766,0l-7.954,7.965l-21.548,21.66c-1.241,1.593-1.41,3.55-0.057,4.892l7.954,7.993   C26.611,60.265,27.485,60.6,28.331,60.6L28.331,60.6z" />
                </svg>
                <p class="flex-grow-0 ml-0.5 mr-1 text-md">{{ props.post.counts.upvotes }}</p>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="10 0 70 90"
                  class="stroke-blue-300 fill-blue-300 w-4 h-4">
                  <path
                    d="M50.02,14.509c-3.441,0-6.825,1.397-9.251,3.801c-2.426,2.375-3.808,5.729-3.808,9.139   c0,3.382,1.382,6.735,3.808,9.139c2.426,2.403,5.81,3.773,9.251,3.773c3.413,0,6.768-1.37,9.194-3.773   c2.426-2.404,3.836-5.757,3.836-9.139c0-3.41-1.41-6.764-3.836-9.139C56.788,15.906,53.433,14.509,50.02,14.509L50.02,14.509z    M50.02,16.074c2.989,0,5.951,1.229,8.066,3.326s3.356,5.086,3.356,8.049c0,2.962-1.241,5.897-3.356,7.993   s-5.077,3.326-8.066,3.326c-2.99,0-6.007-1.229-8.123-3.326c-2.115-2.096-3.356-5.031-3.356-7.993c0-2.963,1.241-5.953,3.356-8.049   C44.013,17.304,47.03,16.074,50.02,16.074L50.02,16.074z M28.331,37.846c-1.269,0-2.538,0.475-3.525,1.453l-7.925,7.993   c-1.946,1.957-1.721,4.919-0.084,6.988c0.028,0.027,0.056,0.027,0.084,0.056l21.604,21.716l7.954,7.993   c1.918,1.929,5.104,1.929,7.05,0l7.926-7.993l21.632-21.716c1.946-1.957,1.946-5.115,0-7.043l-7.953-7.993   c-0.931-0.95-2.2-1.397-3.44-1.425c-0.028,0-0.057-0.028-0.085-0.028c-1.27,0-2.566,0.475-3.525,1.453L49.963,57.494L31.885,39.299   C30.897,38.321,29.628,37.846,28.331,37.846L28.331,37.846z M28.331,39.383c0.875,0.028,1.721,0.363,2.397,1.034l18.671,18.725   c0.282,0.308,0.846,0.308,1.128,0l18.67-18.725c0.648-0.671,1.522-1.006,2.369-1.006c0.874,0,1.721,0.335,2.397,1.006l7.925,7.965   c1.354,1.369,1.354,3.493,0,4.835L60.286,74.934l0.027,0.028l-7.981,7.965c-1.325,1.342-3.412,1.342-4.766,0l-7.954-7.993   L18.065,53.302c-1.241-1.593-1.41-3.578-0.057-4.919l7.954-7.965C26.611,39.747,27.485,39.383,28.331,39.383L28.331,39.383z" />
                </svg>
                <p class="flex-grow-0 ml-0.5 text-md">{{ props.post.counts.downvotes }}</p>
              </div>
            </div>
          </div>
        </div>
        <!-- Image -->
        <div v-if="props.post.content.hasImage" class="w-1/4">
          <img :src="props.post.content.url" class="w-full h-full max-h-32 max-w-10 object-contain" />
        </div>
        <!-- Video link-->
        <div v-else-if="props.post.content.hasVideo" class="w-1/4 flex justify-center items-center">
          <div class="bg-slate-300 rounded-md w-16 h-16 pl-1 pt-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -3 24 30"
              class="h-14 w-14 fill-current stroke-current text-gray-500">
              <path fill="#000" fill-rule="evenodd"
                d="M6 2.5A1.5 1.5 0 0 0 4.5 4v16A1.5 1.5 0 0 0 6 21.5h12a1.5 1.5 0 0 0 1.5-1.5V8.92a1.5 1.5 0 0 0-.524-1.139l-5.74-4.92a1.5 1.5 0 0 0-.976-.361H6ZM3.5 4A2.5 2.5 0 0 1 6 1.5h6.26a2.5 2.5 0 0 1 1.627.602l5.74 4.92A2.5 2.5 0 0 1 20.5 8.92V20a2.5 2.5 0 0 1-2.5 2.5H6A2.5 2.5 0 0 1 3.5 20V4Z"
                clip-rule="evenodd" />
              <path fill="#000" fill-rule="evenodd"
                d="M12.5 6V2.5h1V6A1.5 1.5 0 0 0 15 7.5h4.5v1H15A2.5 2.5 0 0 1 12.5 6Zm-3.749 4.566a.5.5 0 0 1 .5.002l6 3.5a.5.5 0 0 1 0 .864l-6 3.5A.5.5 0 0 1 8.5 18v-7a.5.5 0 0 1 .251-.434ZM9.5 11.87v5.26l4.508-2.63L9.5 11.87Z"
                clip-rule="evenodd" />
            </svg>
          </div>
        </div>
        <!-- Youtube link -->
        <div v-else-if="props.post.content.hasUrl && props.post.content.url_domain == 'youtube.com'"
          class="w-1/4 flex justify-center items-center">
          <div class="bg-slate-300 rounded-md w-16 h-16 pl-2 pt-2">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="15 0 70 95"
              class="h-12 w-12 fill-current text-gray-500">
              <path
                d="m8.47 34.705-2.997-.142 2.997.142Zm12.566-13.173-.228-2.992.228 2.992ZM8.48 65.119l2.997-.143-2.997.143ZM20.817 78.25l.268-2.988-.268 2.988Zm58.308.005.268 2.988-.268-2.988Zm12.37-13.199-2.996-.14 2.996.14Zm.01-30.291-2.997.14 2.997-.14Zm-12.6-13.239-.228 2.991.227-2.991ZM63 50l1.519 2.587a3 3 0 0 0 0-5.174L63 50ZM40 36.5l1.519-2.587A3 3 0 0 0 37 36.5h3Zm0 27h-3a3 3 0 0 0 4.519 2.587L40 63.5ZM11.466 34.847c.263-5.537 4.409-9.914 9.798-10.324l-.456-5.983c-8.546.65-14.935 7.6-15.335 16.023l5.993.284ZM11 49.813c0-4.003.22-9.766.466-14.966l-5.993-.284C5.226 39.768 5 45.656 5 49.813h6Zm.476 15.163c-.25-5.25-.476-11.109-.476-15.163H5c0 4.21.232 10.195.482 15.449l5.994-.286Zm9.609 10.287c-5.302-.476-9.349-4.817-9.61-10.287l-5.993.286c.397 8.31 6.628 15.22 15.067 15.977l.536-5.976ZM50 76.5c-12.037 0-21.93-.61-28.915-1.237l-.536 5.976c7.14.64 17.213 1.261 29.451 1.261v-6Zm28.858-1.232C71.876 75.893 62.004 76.5 50 76.5v6c12.204 0 22.257-.617 29.393-1.256l-.535-5.976Zm9.64-10.352c-.258 5.504-4.32 9.876-9.64 10.352l.535 5.976c8.473-.758 14.707-7.716 15.1-16.046l-5.994-.282ZM89 49.813c0 3.493-.24 9.564-.501 15.103l5.993.282c.26-5.52.508-11.728.508-15.385h-6Zm-.492-14.907c.257 5.488.492 11.456.492 14.907h6c0-3.613-.242-9.72-.499-15.188l-5.993.281Zm-9.831-10.388c5.408.41 9.57 4.818 9.83 10.388l5.994-.28c-.395-8.443-6.79-15.439-15.37-16.09l-.454 5.982ZM50 23.5c12.083 0 21.799.496 28.677 1.018l.454-5.982C72.115 18.003 62.247 17.5 50 17.5v6Zm-28.736 1.023C28.145 23.999 37.882 23.5 50 23.5v-6c-12.282 0-22.171.506-29.192 1.04l.456 5.983Zm43.255 22.89-23-13.5-3.038 5.174 23 13.5 3.038-5.174Zm-23 18.674 23-13.5-3.038-5.174-23 13.5 3.038 5.174ZM37 36.5v27h6v-27h-6Z" />
            </svg>
          </div>
        </div>
        <!-- Standard link -->
        <div v-else-if="props.post.content.hasUrl" class="w-1/4 flex justify-center items-center">
          <a :href="props.post.content.url" target="_blank" alt="Youtube video link">
            <div class="bg-slate-300 rounded-md w-16 h-16 pl-2 pt-1.5">
              <svg version="1.1" viewBox="300 200 750 750" xmlns="http://www.w3.org/2000/svg"
                class="h-12 w-12 fill-current text-gray-500">
                <path
                  d="m762.18 781.91h-33.719c-2.2578 0-4.7539 0-7.0078-0.44531-14.484-0.25391-28.738-2.7344-42.098-6.8047-34.824-10.633-65.16-32.125-86.426-60.625-5.6641-7.2461-10.402-14.711-14.473-22.621-3.8398-7.2461-7.2461-14.734-9.7305-22.633-6.5508-17.664-9.9609-36.66-9.9609-56.566s3.4062-38.93 9.9609-56.555h61.754c4.2969 0 8.3633 0.43359 12.445 1.3555-10.176 15.828-16.285 34.824-16.285 55.199s6.1211 39.371 16.285 55.188c4.5234 6.8047 9.7422 13.141 15.828 18.781 6.1328 5.8789 12.898 10.871 20.594 15.168 14.473 7.9336 31.223 12.684 49.105 12.684h158.37c56.125 0 101.81-45.695 101.81-101.81 0-56.113-45.695-101.8-101.81-101.8h-66.973c-14.461-26.699-34.152-49.777-57.684-67.883h124.66c93.66 0 169.69 75.996 169.69 169.68 0 93.695-76.031 169.69-169.69 169.69l-124.64 0.007813z" />
                <path
                  d="m700.18 538.25c-6.3359-5.8906-13.117-11.09-20.809-15.145-14.461-8.1836-31.223-12.684-48.863-12.684h-158.39c-56.09 0-101.8 45.684-101.8 101.8 0 56.113 45.719 101.81 101.8 101.81h67.199c14.27 26.473 33.938 49.535 57.469 67.871h-124.67c-93.66 0-169.67-75.996-169.67-169.69 0-93.684 76.008-169.68 169.67-169.68h158.39c2.4961 0 4.7539 0 7.0312 0.44531 14.461 0.22656 28.488 2.7344 41.832 6.8047 35.074 10.633 65.375 32.113 86.438 60.625 5.8672 7.2344 10.633 14.711 14.699 22.621 3.8281 7.2461 7.2461 14.711 9.7422 22.633 6.5625 17.629 9.9375 36.648 9.9375 56.555s-3.3711 38.902-9.9375 56.566h-61.766c-4.2734 0-8.6055-0.44531-12.445-1.3789 10.402-15.805 16.285-34.801 16.285-55.188 0-20.363-5.8789-39.359-16.285-55.199-4.543-6.7852-9.7383-13.109-15.859-18.762z" />
              </svg>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>
</template>

<style scoped>
/* CSS */
.scroll-container::-webkit-scrollbar {
  width: 0.5rem;
  /* Set the width of the scrollbar */
}

.scroll-container::-webkit-scrollbar-track {
  background-color: transparent;
  /* Set the background color of the scrollbar track */
}

.scroll-container::-webkit-scrollbar-thumb {
  background-color: #ddd;
  /* Set the color of the scrollbar thumb */
  border-radius: 0.25rem;
  /* Set the border radius of the scrollbar thumb */
}

.scroll-container::-webkit-scrollbar-thumb:hover {
  background-color: #999;
  /* Set the color of the scrollbar thumb on hover */
}

.scroll-container {
  -ms-overflow-style: none;
  /* Hide the scrollbar on IE and Edge */
  scrollbar-width: thin;
  /* Hide the scrollbar on Firefox */
}
</style>

<script setup>
import { ref, computed } from 'vue'
import { useSwipe } from '@vueuse/core'

const props = defineProps(['post'])

const containerEl = ref(null)
const contentEl = ref(null)
const optionsElOffset = ref('100')
const contentElOffset = ref('0')
const containerWidth = computed(() => containerEl.value?.offsetWidth)
const optionsVisible = ref(false)

const minSwipeDistance = 25

function mapSwipeValue(value) {
  value = Math.max(0, Math.min(value, containerWidth.value));
  const mappedValue = (value / containerWidth.value) * 100;
  return Math.floor(mappedValue);
}

// TODO: Swipe detection is eating the touch scrolling
// Need to figure out how to handle this
// const { direction, isSwiping, lengthX } = useSwipe(
//   containerEl, {
//   passive: false,
//   onSwipe() {
//     if (!optionsVisible.value && direction.value == 'left') {
//       const mappedValue = mapSwipeValue(lengthX.value)
//       optionsElOffset.value = 100 - mappedValue
//       contentElOffset.value = mappedValue
//       if (mappedValue >= minSwipeDistance) optionsVisible.value = true
//     } else if (optionsVisible.value && direction.value == 'right') {
//       console.log('Swipe right', lengthX.value)
//       const mappedValue = mapSwipeValue(Math.abs(lengthX.value))
//       optionsElOffset.value = mappedValue
//       contentElOffset.value = 100 - mappedValue
//       if (mappedValue >= minSwipeDistance) optionsVisible.value = false
//     }
//   },
//   onSwipeEnd(e, direction) {
//     if (direction == 'left' || direction == 'right') {
//       if (optionsVisible.value) {
//         optionsElOffset.value = 0
//         contentElOffset.value = 100
//       } else {
//         optionsElOffset.value = 100
//         contentElOffset.value = 0
//       }
//     }
//   },
// })

</script>